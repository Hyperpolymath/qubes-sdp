# Qubes OS Automated Setup Configuration
# Edit this file to customize your qube topology
# Lines starting with # are comments

# ==============================================================================
# GLOBAL SETTINGS
# ==============================================================================

# Default template to use for all qubes (can be overridden per-qube)
# Options: fedora-40-minimal, debian-12-minimal, etc.
DEFAULT_TEMPLATE="fedora-40-minimal"

# Enable dry-run mode (test without making changes)
# Options: true, false
DRY_RUN="false"

# Enable verbose logging
# Options: true, false
VERBOSE="true"

# Log file location (will be created in dom0)
LOG_FILE="/var/log/qubes-sdp-setup.log"

# Enable automatic backups after setup
# Options: true, false
AUTO_BACKUP="true"

# Backup destination (must be an existing qube or dom0 path)
BACKUP_DEST="dom0:/var/backups/qubes-sdp"

# ==============================================================================
# WORK QUBE CONFIGURATION
# ==============================================================================

# Create work qube
ENABLE_WORK="true"

# Work qube name
WORK_NAME="work"

# Work qube label color
# Options: red, orange, yellow, green, blue, purple, gray, black
WORK_LABEL="green"

# Work qube memory (MB)
WORK_MEMORY="2048"

# Work qube network (leave empty for default, or specify sys-firewall, sys-net, etc.)
WORK_NETVM="sys-firewall"

# Work qube template
WORK_TEMPLATE="${DEFAULT_TEMPLATE}"

# Work qube firewall policy
# Options: allow-all, deny-all, custom
WORK_FIREWALL_POLICY="custom"

# Work qube allowed ports (comma-separated: protocol:port)
# Example: tcp:80,tcp:443,udp:53
WORK_ALLOWED_PORTS="tcp:80,tcp:443,udp:53"

# Work qube provides network to other qubes
WORK_PROVIDES_NETWORK="false"

# Work qube autostart on boot
WORK_AUTOSTART="false"

# Additional packages to install in work qube (space-separated)
WORK_PACKAGES="vim git curl wget"

# ==============================================================================
# VAULT QUBE CONFIGURATION (Air-gapped, no network)
# ==============================================================================

# Create vault qube
ENABLE_VAULT="true"

# Vault qube name
VAULT_NAME="vault"

# Vault qube label color
VAULT_LABEL="black"

# Vault qube memory (MB)
VAULT_MEMORY="1024"

# Vault qube network (MUST be empty for air-gapped security)
VAULT_NETVM=""

# Vault qube template
VAULT_TEMPLATE="${DEFAULT_TEMPLATE}"

# Vault qube autostart on boot
VAULT_AUTOSTART="false"

# Additional packages to install in vault qube
VAULT_PACKAGES="vim keepassxc"

# ==============================================================================
# ANON QUBE CONFIGURATION (Anonymous communications via Tor)
# ==============================================================================

# Create anon qube
ENABLE_ANON="true"

# Anon qube name
ANON_NAME="anon"

# Anon qube label color
ANON_LABEL="purple"

# Anon qube memory (MB)
ANON_MEMORY="1024"

# Anon qube network (should be sys-whonix for Tor, falls back to sys-firewall)
ANON_NETVM="sys-whonix"

# Fallback network if ANON_NETVM not available
ANON_NETVM_FALLBACK="sys-firewall"

# Anon qube template
ANON_TEMPLATE="${DEFAULT_TEMPLATE}"

# Anon qube autostart on boot
ANON_AUTOSTART="false"

# Additional packages to install in anon qube
ANON_PACKAGES="vim tor-browser"

# ==============================================================================
# UNTRUSTED QUBE CONFIGURATION (For risky downloads and testing)
# ==============================================================================

# Create untrusted qube
ENABLE_UNTRUSTED="true"

# Untrusted qube name
UNTRUSTED_NAME="untrusted"

# Untrusted qube label color
UNTRUSTED_LABEL="red"

# Untrusted qube memory (MB)
UNTRUSTED_MEMORY="1024"

# Untrusted qube network
UNTRUSTED_NETVM="sys-firewall"

# Untrusted qube template
UNTRUSTED_TEMPLATE="${DEFAULT_TEMPLATE}"

# Use as DisposableVM template
UNTRUSTED_IS_DISPVM_TEMPLATE="true"

# Untrusted qube autostart on boot
UNTRUSTED_AUTOSTART="false"

# Additional packages to install in untrusted qube
UNTRUSTED_PACKAGES="vim"

# ==============================================================================
# ADVANCED QUBE CONFIGURATIONS (Optional)
# ==============================================================================

# Create VPN qube
ENABLE_VPN="false"

# VPN qube name
VPN_NAME="vpn"

# VPN qube label color
VPN_LABEL="blue"

# VPN qube memory (MB)
VPN_MEMORY="512"

# VPN qube network
VPN_NETVM="sys-firewall"

# VPN qube template
VPN_TEMPLATE="${DEFAULT_TEMPLATE}"

# VPN qube provides network
VPN_PROVIDES_NETWORK="true"

# VPN configuration file path (in dom0)
VPN_CONFIG_FILE=""

# Additional packages for VPN qube
VPN_PACKAGES="openvpn wireguard-tools"

# Create USB qube
ENABLE_USB="false"

# USB qube name
USB_NAME="sys-usb"

# USB qube label color
USB_LABEL="red"

# USB qube memory (MB)
USB_MEMORY="512"

# USB qube template
USB_TEMPLATE="${DEFAULT_TEMPLATE}"

# USB devices to attach (comma-separated PCI IDs)
USB_PCI_DEVICES=""

# ==============================================================================
# SPLIT-GPG CONFIGURATION
# ==============================================================================

# Enable split-GPG setup
ENABLE_SPLIT_GPG="false"

# GPG backend qube (where keys are stored)
SPLIT_GPG_BACKEND="${VAULT_NAME}"

# GPG client qubes (comma-separated list of qubes that can use GPG)
SPLIT_GPG_CLIENTS="${WORK_NAME}"

# ==============================================================================
# SPLIT-SSH CONFIGURATION
# ==============================================================================

# Enable split-SSH setup
ENABLE_SPLIT_SSH="false"

# SSH backend qube (where keys are stored)
SPLIT_SSH_BACKEND="${VAULT_NAME}"

# SSH client qubes (comma-separated list)
SPLIT_SSH_CLIENTS="${WORK_NAME}"

# ==============================================================================
# QREXEC POLICY CONFIGURATION
# ==============================================================================

# Enable automatic qrexec policy generation
ENABLE_QREXEC_POLICIES="true"

# Allow file copy from work to vault
ALLOW_WORK_TO_VAULT_COPY="true"

# Allow file copy from untrusted to work (with user confirmation)
ALLOW_UNTRUSTED_TO_WORK_COPY="ask"

# Allow clipboard copy between work and vault
ALLOW_WORK_VAULT_CLIPBOARD="ask"

# ==============================================================================
# TEMPLATE CONFIGURATION
# ==============================================================================

# Auto-install missing templates
AUTO_INSTALL_TEMPLATES="true"

# Templates to ensure are installed (comma-separated)
REQUIRED_TEMPLATES="fedora-40-minimal"

# Template update before setup
UPDATE_TEMPLATES="true"

# ==============================================================================
# BACKUP CONFIGURATION
# ==============================================================================

# Backup schedule (cron format)
BACKUP_SCHEDULE="0 2 * * *"

# Qubes to backup (comma-separated, or "all")
BACKUP_QUBES="vault,work"

# Backup compression
# Options: true, false
BACKUP_COMPRESSION="true"

# Backup encryption passphrase file (in dom0)
BACKUP_PASSPHRASE_FILE=""

# ==============================================================================
# TOPOLOGY PRESETS
# ==============================================================================

# Use preset instead of individual qube settings
# Options: custom, journalist, developer, researcher, teacher, pentester
# Set to "custom" to use individual settings above
TOPOLOGY_PRESET="custom"

# Note: When using a preset, individual qube settings above are ignored
# Presets are defined in qubes-setup-advanced.sh
